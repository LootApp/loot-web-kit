"use strict";var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var e in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a},_createClass=function(){function a(b,c){for(var f,e=0;e<c.length;e++)f=c[e],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),_templateObject=_taggedTemplateLiteral(["\n    .c-btn--flat {\n      padding: 7px 10px;\n      border-radius: 3px;\n      text-transform: uppercase;\n      font-weight: semibold;\n      transition: ",";\n\n      &:hover {\n        background-color: ",";\n        color: ",";\n      }\n    }\n\n    .c-datepicker__header {\n      display: none;\n    }\n\n    .c-datepicker {\n      min-height: 380px !important;\n    }\n\n    .c-datepicker__day-body:hover {\n      &::before {\n        background-color: "," !important;\n      }\n    }\n\n    .c-datepicker__days {\n      margin-top: 0 !important;\n    }\n\n    .c-datepicker__back::before,\n    .c-datepicker__next::after {\n      content: '' !important;\n      width: 12px;\n      height: 12px;\n      display: inline-block;\n      background-image: url(",");\n      background-size: cover;\n      opacity: 0.7;\n    }\n\n    .c-datepicker__back::before {\n      transform: rotate(180deg);\n    }\n\n    .c-datepicker__toggle {\n      display: none !important;\n    }\n\n    .c-datepicker__day--disabled {\n      pointer-events: none;\n      opacity: 0.35;\n      cursor: not-allowed;\n    }\n  "],["\n    .c-btn--flat {\n      padding: 7px 10px;\n      border-radius: 3px;\n      text-transform: uppercase;\n      font-weight: semibold;\n      transition: ",";\n\n      &:hover {\n        background-color: ",";\n        color: ",";\n      }\n    }\n\n    .c-datepicker__header {\n      display: none;\n    }\n\n    .c-datepicker {\n      min-height: 380px !important;\n    }\n\n    .c-datepicker__day-body:hover {\n      &::before {\n        background-color: "," !important;\n      }\n    }\n\n    .c-datepicker__days {\n      margin-top: 0 !important;\n    }\n\n    .c-datepicker__back::before,\n    .c-datepicker__next::after {\n      content: '' !important;\n      width: 12px;\n      height: 12px;\n      display: inline-block;\n      background-image: url(",");\n      background-size: cover;\n      opacity: 0.7;\n    }\n\n    .c-datepicker__back::before {\n      transform: rotate(180deg);\n    }\n\n    .c-datepicker__toggle {\n      display: none !important;\n    }\n\n    .c-datepicker__day--disabled {\n      pointer-events: none;\n      opacity: 0.35;\n      cursor: not-allowed;\n    }\n  "]),_templateObject2=_taggedTemplateLiteral(["\n  appearance: none;\n\n  ::-webkit-datetime-edit-fields-wrapper {\n    text-transform: uppercase;\n  }\n\n  ::-webkit-calendar-picker-indicator,\n  ::-webkit-inner-spin-button,\n  ::-webkit-clear-button {\n    display: none;\n  }\n"],["\n  appearance: none;\n\n  ::-webkit-datetime-edit-fields-wrapper {\n    text-transform: uppercase;\n  }\n\n  ::-webkit-calendar-picker-indicator,\n  ::-webkit-inner-spin-button,\n  ::-webkit-clear-button {\n    display: none;\n  }\n"]),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_styledComponents=require("styled-components"),_styledComponents2=_interopRequireDefault(_styledComponents),_Constants=require("../Constants"),_Input=require("./Input"),_Input2=_interopRequireDefault(_Input),_isMobile=require("../utilities/isMobile"),_isMobile2=_interopRequireDefault(_isMobile),_isDateInput=require("../utilities/isDateInput"),_isDateInput2=_interopRequireDefault(_isDateInput);Object.defineProperty(exports,"__esModule",{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectWithoutProperties(a,b){var c={};for(var e in a)0<=b.indexOf(e)||Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _taggedTemplateLiteral(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}var MaterialDateTimePicker;if(!(0,_isMobile2.default)()||(0,_isMobile2.default)()&&!(0,_isDateInput2.default)()){MaterialDateTimePicker=require("material-datetime-picker"),require("material-datetime-picker/dist/material-datetime-picker.css");var a=require("../assets/arrow-calendar.svg");(0,_styledComponents.injectGlobal)(_templateObject,_Constants.transitions.base,_Constants.colours.blue,_Constants.colours.white,_Constants.colours.blue,a)}var SInput=(0,_styledComponents2.default)(_Input2.default)(_templateObject2),InputDateTime=function(a){function b(){var c,e,f,g;_classCallCheck(this,b);for(var h=arguments.length,j=Array(h),k=0;k<h;k++)j[k]=arguments[k];return g=(e=(f=_possibleConstructorReturn(this,(c=b.__proto__||Object.getPrototypeOf(b)).call.apply(c,[this].concat(j))),f),f._onCalendarOpen=function(){return(0,_isMobile2.default)()&&(!(0,_isMobile2.default)()||(0,_isDateInput2.default)())?null:f._onOpenCalendar()},f._value=function(){return f.input._value()},e),_possibleConstructorReturn(f,g)}return _inherits(b,a),_createClass(b,[{key:"componentDidMount",value:function componentDidMount(){var c=this;(0,_isMobile2.default)()&&(!(0,_isMobile2.default)()||(0,_isDateInput2.default)())||(this.picker=new MaterialDateTimePicker({default:this.props.defaultDate,dateValidator:function dateValidator(e){return c.props.minDate&&c.props.maxDate?e>=c.props.minDate&&e<=c.props.maxDate:c.props.minDate?e>=c.props.minDate:c.props.maxDate?e<=c.props.maxDate:void 0}}).on("open",function(){setTimeout(function(){c.overlay=document.querySelector(".c-scrim--shown"),c.overlay.addEventListener("click",c._onCloseCalendar)},100)}).on("close",function(){c.overlay.removeEventListener("click",c._onCloseCalendar)}).on("submit",function(e){c.input.setState({value:e.toDate().toISOString().substring(0,10)})}),this._onOpenCalendar=function(){return c.picker.open()},this._onCloseCalendar=function(){return c.picker.close()})}},{key:"componentWillUnmount",value:function componentWillUnmount(){(0,_isMobile2.default)()&&(!(0,_isMobile2.default)()||(0,_isDateInput2.default)())||this.overlay.removeEventListener("click",this._onCloseCalendar)}},{key:"render",value:function render(){var c=this,e=_objectWithoutProperties(this.props,[]);return _react2.default.createElement(SInput,_extends({},e,{type:"date",label:"Date",placeholder:"DD/MM/YYYY",innerRef:function innerRef(f){c.input=f},readOnly:!0,onFocus:this._onCalendarOpen}))}}]),b}(_react.Component);InputDateTime.propTypes={defaultDate:_propTypes2.default.instanceOf(Date),minDate:_propTypes2.default.instanceOf(Date),maxDate:_propTypes2.default.instanceOf(Date)},InputDateTime.defaultProps={defaultDate:new Date,minDate:null,maxDate:null},exports.default=InputDateTime;